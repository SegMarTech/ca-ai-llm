<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CA AI Assistant</title>

<style>
  :root {
    --primary: #f6821f;
    --primary-dark: #e67e22;
    --bg: #f4f6f8;
    --card-bg: #ffffff;
    --border: #e5e7eb;
    --text: #1f2937;
    --muted: #6b7280;
    --user-bg: #fff2e6;
    --assistant-bg: #f3f4f6;
    --dark-bg: #1f2937;
    --dark-card-bg: #111827;
    --dark-text: #f9fafb;
    --dark-muted: #9ca3af;
  }

  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    margin: 0;
    background: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
    padding: 1rem;
  }

  .app {
    width: 100%;
    max-width: 900px;
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    background: var(--card-bg);
    height: calc(100vh - 2rem);
  }

  /* HEADER */
  header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border);
    position: relative;
  }

  .logo {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: var(--primary);
    color: white;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  header h1 {
    margin: 0;
    font-size: 1.1rem;
  }

  header p {
    font-size: 0.75rem;
    color: var(--muted);
  }

  /* DOMAIN SELECTOR */
  #domain-selector {
    position: absolute;
    right: 1rem;
    top: 1rem;
    padding: 0.3rem 0.5rem;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: white;
    font-size: 0.85rem;
  }

  /* CHAT */
  .chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .chat-messages {
    flex: 1;
    padding: 1.25rem;
    overflow-y: auto;
    background: var(--bg);
  }

  .message {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 1rem;
    max-width: 85%;
  }

  .message p {
    padding: 0.75rem 0.9rem;
    border-radius: 10px;
    white-space: pre-wrap;
    line-height: 1.5;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }

  .assistant-message { align-self: flex-start; }
  .assistant-message p { background: var(--assistant-bg); }

  .user-message { align-self: flex-end; flex-direction: row-reverse; }
  .user-message p { background: var(--user-bg); }

  .avatar {
    width: 32px; height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem; font-weight: 600;
    flex-shrink: 0;
  }

  .assistant-message .avatar { background: var(--primary); color: white; }
  .user-message .avatar { background: #d1d5db; color: #374151; }

  /* SOURCES */
  .sources {
    font-size: 0.75rem;
    color: var(--muted);
    margin-top: 0.3rem;
    padding-left: 0.75rem;
    border-left: 2px solid var(--border);
    display: none;
  }

  .source-toggle { cursor: pointer; color: var(--primary); font-size: 0.75rem; margin-top: 0.25rem; display: inline-block; }

  /* TYPING */
  .typing-indicator {
    padding: 0.75rem 1.25rem;
    font-size: 0.85rem;
    color: var(--muted);
    display: none;
  }

  .typing-indicator.visible { display: block; }

  /* INPUT */
  .message-input {
    display: flex;
    gap: 0.5rem;
    padding: 0.75rem;
    border-top: 1px solid var(--border);
    background: white;
  }

  #user-input {
    flex: 1;
    resize: none;
    padding: 0.6rem 0.75rem;
    border-radius: 8px;
    border: 1px solid var(--border);
    font-family: inherit;
    font-size: 0.95rem;
    min-height: 44px;
  }

  #send-button {
    padding: 0 1.2rem;
    border-radius: 8px;
    border: none;
    background: var(--primary);
    color: white;
    font-weight: 600;
    cursor: pointer;
  }

  #send-button:hover { background: var(--primary-dark); }
  #send-button:disabled { opacity: 0.6; cursor: not-allowed; }

  /* FOOTER */
  footer { text-align: center; font-size: 0.75rem; color: var(--muted); padding: 0.5rem; }

  /* DARK MODE */
  body.dark-mode { background: var(--dark-bg); color: var(--dark-text); }
  body.dark-mode .app { background: var(--dark-card-bg); }
  body.dark-mode header p, body.dark-mode .sources { color: var(--dark-muted); }
</style>
</head>

<body>
<div class="app">
  <header>
    <div class="logo">CA</div>
    <div>
      <h1>CA AI Assistant</h1>
      <p>Tax â€¢ GST â€¢ Audit â€¢ Compliance â€¢ Advisory</p>
    </div>
    <select id="domain-selector">
      <option value="">All Domains</option>
      <option value="GST">GST</option>
      <option value="Income Tax">Income Tax</option>
      <option value="Audit">Audit</option>
      <option value="ROC">ROC / MCA</option>
      <option value="Compliance">Compliance</option>
    </select>
  </header>

  <div class="chat-container">
    <div id="chat-messages" class="chat-messages">
      <div class="message assistant-message">
        <div class="avatar">AI</div>
        <p>Hello! Iâ€™m your Chartered Accountant AI assistant. How can I help you today?</p>
      </div>
    </div>

    <div id="typing-indicator" class="typing-indicator">
      AI is analysing and respondingâ€¦
    </div>

    <div class="message-input">
      <textarea id="user-input" placeholder="Ask about GST, Income Tax, Audit, notices, complianceâ€¦" rows="1" autofocus></textarea>
      <button id="send-button">Send</button>
    </div>
  </div>

  <footer>
    Professional guidance only Â· Verify with latest laws & ICAI guidance Â· <span id="dark-toggle" style="cursor:pointer;color:var(--primary)">ðŸŒ™ Dark Mode</span>
  </footer>
</div>

<script src="chat.js"></script>
<script>
  // Dark mode toggle
  const darkToggle = document.getElementById('dark-toggle');
  darkToggle.addEventListener('click', () => document.body.classList.toggle('dark-mode'));

  // Enable showing sources
  function toggleSources(el) {
    const sourcesEl = el.nextElementSibling;
    if (sourcesEl) sourcesEl.style.display = sourcesEl.style.display === 'block' ? 'none' : 'block';
  }

  window.toggleSources = toggleSources; // Expose to chat.js
</script>
</body>
</html>
